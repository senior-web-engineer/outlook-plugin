<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <title>Login</title>

  <!-- Office JavaScript API -->
  <script src="https://appsforoffice.microsoft.com/lib/1/hosted/office.js" type="text/javascript"></script>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  
  <!-- Template styles -->
  <link href="login.css" rel="stylesheet" type="text/css" />


  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>  
</head>

<body class="ms-font-l">
  	<div class="global-container">
		<div class="logo">
		<img src="/assets/logo.svg" />
		</div>
    	<div class="card login-form">
			<div class="card-body">
				<div class="card-title">
					<span class="green">Log in </span><span>to luckycloud</span>
				</div>
				<div class="card-text">
					<!--
					<div class="alert alert-danger alert-dismissible fade show" role="alert">Incorrect username or password.</div> -->
					<form id="regForm">
						<!-- to error: add class "has-danger" -->
						<!-- <div class="form-group">
							<select name="membership_option"  class="form-control form-control-sm" id ="membership_option" placeholder="Your luckycloud product" >
								<option selected disabled>Select</option>
								<option value="home">Home</option>
								<option value="business">Business</option>
								<option value="enterprise">Enterprise</option>
							</select>
						</div> -->
						<div class="custom-select">
							<select id ="membership_option"name="membership_option" onchange="membershipChange(this)" > 
								<option selected disabled>Your luckycloud product</option>
								<option value="home">Home</option>
								<option value="business">Business</option>
								<option value="enterprise">Enterprise</option>
							</select>
						</div>
						<div class="form-group seafile_env" style="display: none;">
							<input type="text" class="form-control form-control-sm"  id="seafile_env"  name="seafile_env" aria-describedby="emailHelp" placeholder="Your Seafile Envioronment">
						</div>

						<div class="form-group">
							<input type="email" class="form-control form-control-sm" id="username" name="username" aria-describedby="emailHelp" placeholder="Your Email Address">
						</div>
						<div class="form-group">
							<input type="password" class="form-control form-control-sm" id="password" name="password" placeholder="Password">
						</div>
						<div class="alert alert-success" role="alert" style="display: none;">
							You logged in successfully.
						</div>
						<div class="alert alert-danger" role="alert" style="display: none;">
							Your credential is not incorrect, please try again.
						</div>
						<div class="form-group submit-btn-div">
							<button type="button" class="" id="seafile_loginbutton">
								<i class="login-background"></i>
								Log in
							</button>
						</div>

					</form>
				</div>
			</div>
  		</div>
	</div>
	<script>
		
		var x, i, j, l, ll, selElmnt, a, b, c;
		/*look for any elements with the class "custom-select":*/
		x = document.getElementsByClassName("custom-select");
		l = x.length;
		for (i = 0; i < l; i++) {
			selElmnt = x[i].getElementsByTagName("select")[0];
			ll = selElmnt.length;
			/*for each element, create a new DIV that will act as the selected item:*/
			a = document.createElement("DIV");
			a.setAttribute("class", "select-selected");
			a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
			x[i].appendChild(a);
			/*for each element, create a new DIV that will contain the option list:*/
			b = document.createElement("DIV");
			b.setAttribute("class", "select-items select-hide");
			for (j = 1; j < ll; j++) {
				/*for each option in the original select element,
				create a new DIV that will act as an option item:*/
				c = document.createElement("DIV");
				c.innerHTML = selElmnt.options[j].innerHTML;
				c.addEventListener("click", function(e) {
					/*when an item is clicked, update the original select box,
					and the selected item:*/
					var y, i, k, s, h, sl, yl;
					s = this.parentNode.parentNode.getElementsByTagName("select")[0];
					sl = s.length;
					h = this.parentNode.previousSibling;
					for (i = 0; i < sl; i++) {
						if (s.options[i].innerHTML == this.innerHTML) {
							s.selectedIndex = i;
							h.innerHTML = this.innerHTML;
							y = this.parentNode.getElementsByClassName("same-as-selected");
							yl = y.length;
							for (k = 0; k < yl; k++) {
							y[k].removeAttribute("class");
							}
							this.setAttribute("class", "same-as-selected");
							membershipChange(this.innerHTML);
							break;
						}
					}
					h.click();
				});
				b.appendChild(c);
			}
			x[i].appendChild(b);
			a.addEventListener("click", function(e) {
				/*when the select box is clicked, close any other select boxes,
				and open/close the current select box:*/
				e.stopPropagation();
				closeAllSelect(this);
				this.nextSibling.classList.toggle("select-hide");
				this.classList.toggle("select-arrow-active");
				this.parentElement.classList.toggle("select-active");
			});
		}

		function closeAllSelect(elmnt) {
			/*a function that will close all select boxes in the document,
			except the current select box:*/
			var x, y, i, xl, yl, arrNo = [];
			x = document.getElementsByClassName("select-items");
			y = document.getElementsByClassName("select-selected");
			xl = x.length;
			yl = y.length;
			for (i = 0; i < yl; i++) {
				if (elmnt == y[i]) {
				arrNo.push(i)
				} else {
					y[i].classList.remove("select-arrow-active");
					y[i].parentElement.classList.remove("select-active");
				}
			}
			for (i = 0; i < xl; i++) {
				if (arrNo.indexOf(i)) {
				x[i].classList.add("select-hide");
				}
			}
		}
		/*if the user clicks anywhere outside the select box,
		then close all select boxes:*/
		document.addEventListener("click", closeAllSelect);

		function membershipChange(membership){
			if (membership == 'Home') {
				$('div.seafile_env').hide();
				$('#seafile_env').val("https://sync.luckycloud.de");
			} else if (membership == 'Business') {
				$('div.seafile_env').hide();
				$('#seafile_env').val("https://storage.luckycloud.de");
			} else if (membership == "Enterprise") {
				$('div.seafile_env').show();
				$('#seafile_env').val("");
			}
		}
	</script>
</body>
</html>